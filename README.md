# Fey Game Mock

A Unity project mock containing auto-generated game data classes and example entity definitions for the Fey game data pipeline.

## Overview

This repository contains the output of the [fey-data](https://github.com/octoio/fey-data) pipeline - a type-safe data generation system that converts JSON entity definitions into Unity C# classes.

## Project Structure

```
Assets/
├── Scripts/Data/                    # Generated C# classes
│   ├── Dto/                         # Data Transfer Objects
│   ├── Type/                        # Enum types
│   ├── Mapper/                      # Conversion utilities
│   └── Interface/                   # Interface definitions
└── StreamingAssets/
    ├── json/                        # Example entity definitions
    │   ├── simple_sword.weapon.json
    │   ├── simple_icon.image.json
    │   └── simple_model.model.json
    ├── data/                        # Asset files for validation
    │   ├── image/
    │   └── model/
    └── entity-reference-indices.json # Generated entity lookup
```

## Generated Content

### C# Classes
- **100+ generated C# classes** with Unity serialization attributes
- **Type-safe entity definitions** for weapons, characters, skills, etc.
- **Visitor patterns** for polymorphic entity processing
- **Conversion utilities** for data mapping

### Example Entities
- **Weapon**: `simple_sword.weapon.json` - Basic weapon with stats and model references
- **Image**: `simple_icon.image.json` - Texture asset definition
- **Model**: `simple_model.model.json` - 3D model with transform data

## Entity Types Supported

The generated classes support various game entity types:

### Combat
- **Weapons** - Swords, axes, bows with damage, speed, and requirements
- **Characters** - Player and NPC definitions with stats and abilities
- **Skills** - Spells and abilities with complex execution trees
- **Equipment** - Armor and accessories with stat modifiers
- **Status Effects** - Buffs and debuffs with duration and mechanics

### Assets
- **Images** - Textures and sprites with size validation
- **Models** - 3D meshes with transforms and anchors
- **Audio** - Sound clips and banks for game audio
- **Animations** - Character and object animations

### System
- **Quality Types** - Rarity tiers with colors and effects
- **Stats** - Character attributes and modifiers
- **Drop Tables** - Loot generation rules
- **Requirements** - Conditions for equipment and skills

## Usage

This mock project demonstrates:

1. **Data-Driven Design** - Game content defined in JSON, not code
2. **Type Safety** - Generated C# classes prevent runtime errors
3. **Validation** - Entity references and data integrity checked at build time
4. **Unity Integration** - Classes ready for Unity serialization and inspection

## Pipeline Integration

Generated by the fey-data pipeline:
1. **JSON Validation** - Schema and cross-reference checking
2. **Code Generation** - C# classes with proper attributes
3. **Index Creation** - Fast entity lookup and validation
4. **File Organization** - Structured output for Unity projects

## Development

To regenerate content:
1. Modify JSON files in `Assets/StreamingAssets/json/`
2. Run the fey-data pipeline: `dune exec gamedata`
3. Generated C# files will be updated automatically

## Entity Reference System

Entities reference each other through a type-safe system:
- **Validation** - Referenced entities must exist
- **Type Checking** - References must match expected types  
- **ID Generation** - Automatic unique identifier creation
- **Index Lookup** - Fast runtime entity resolution

## Example Entity

```json
{
  "id": "player:Weapon:simple_sword:1",
  "owner": "player",
  "type": "Weapon", 
  "key": "simple_sword",
  "version": 1,
  "entity": {
    "metadata": {
      "title": "Simple Sword",
      "description": "A basic sword for testing"
    },
    "category": "OneHandSword",
    "quality": "Common",
    "icon_reference": {
      "owner": "player",
      "type": "Image", 
      "key": "simple_icon",
      "version": 1,
      "id": "player:Image:simple_icon:1"
    }
  }
}
```

## Generated C# Class

```csharp
[Serializable]
public class Weapon
{
    public Metadata Metadata { get; private set; }
    public WeaponCategory Category { get; private set; }
    public EntityReference IconReference { get; private set; }
    // ... more properties
}
```

## License

This project is part of the Octoio game development toolkit.